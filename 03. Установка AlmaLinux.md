# Как скачать?

На основе исходного кода Red Hat Enterprise Linux (RHEL) создаётся полностью совместимый, бесплатный дистрибутив Alma Linux. Именно его мы будем использовать для подготовки к сертификации от Red Hat.
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/alma.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/alma1.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/alma2.png)

AlmaLinux можно скачать с сайта [almalinux.org](https://almalinux.org/), как с помощью прямой [ссылки](https://repo.almalinux.org/almalinux/9.5/isos/x86_64/AlmaLinux-9.5-x86_64-dvd.iso), так и при помощи торрента. 
Весь данный курс был сделан на дистрибутиве Centos Linux, который также являлся копией RHEL. Но с недавних пор Centos прекратили поддерживать и для актуальности курса я выбрал AlmaLinux. Можно сказать, что единственными отличиями являются название, логотип и сайт, поэтому весь курс переделывать смысла нет. Просто имейте ввиду, что там где я буду говорить Centos - для вас это Alma.

Мы можем скачать образ DVD диска на 9 гигабайт, в котором есть весь необходимый для установки софт, либо минимальный образ на 700 мегабайт, который, при установке, будет докачивать необходимое из интернета. Так как я буду устанавливать систему несколько раз - с графическим интерфейсом, без графического интерфейса и т.д. - я скачиваю DVD образ на 9 гигабайт.

# Подготовка VirtualBox

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/2.cent.png)

После того как всё скачается, запускаем VirtualBox и создаём новую виртуальную машину. Если в названии указать «Cen», то программа сама предложит тип операционной системы (Linux) и версию (Red Hat (64 bit)). Дальше указываем количество оперативной памяти для виртуальной машины. Минимальное значение – 2 гигабайта, но, в дальнейшем, без графического интерфейса, можно обойтись и меньшими параметрами.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/3.vdi.png)

Дальше выбираем «Создать виртуальный диск», так как он нам нужен для операционной системы, а готового диска у нас нет. После этого указываем тип диска, в зависимости от того, будет ли нам нужно этот виртуальный диск переносить на другие платформы или нет. Так как мы этого не планируем, выбираем VDI – родной формат для VirtualBox. Дальше выбираем, как наш виртуальный диск займёт пространство на нашем реальном диске. Тут два варианта – либо мы даём виртуальной машине диск с каким-то виртуальным размером, реальный размер которого будет изменяться в зависимости от действительно занятого пространства, либо мы сразу выделяем место для виртуального диска, после чего это место станет недоступно для хоста, независимо от того, есть там данные или нет. Есть небольшая разница в производительности в пользу фиксированного размера, но динамический метод оставляет больше места на компьютере. Часто такие подходы к выделению пространства называют thin и thick provisioning соответственно. После этого выбираем, где будет храниться виртуальный диск и его объём. Объём зависит от количества устанавливаемых программ и хранимых файлов. При минимальной установке желательно давать объём не меньше 8 гигабайт, а в нашем случае я укажу 20 гигабайт, которых хватит с запасом.

После нажатия Create кликаем правой кнопкой мыши на появившейся виртуальной машине и заходим в настройки.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/4.set.png)

Во вкладке General – Advanced – Shared Clipboard выставляем значение Bidirectional, что позволит копировать текст между хостом и виртуалкой, то есть создаст общий буфер обмена.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/5.clipb.png)

Во вкладке Display – Screen - Video Memory повышаем значение до 64 Мб или выше, так как при малых значениях графический интерфейс виртуальной машины может подвисать.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/6.video.png)

Во вкладке Network – Adapter 1 меняем Attached to: NAT на Bridged Adapter и указываем сетевой адаптер, к которому подсоединена сеть на нашем компьютере, что позволит виртуальной машине быть в той же сети, что и хост.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/7.bridge.png)

После этого нажимаем OK и Start, что запускает виртуальную машину.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/8.start.png)

VirtualBox предложит указать образ, с которого будет установлена операционная система. В появившемся окне выбираем Add и указываем ISO файл Alma-а, который мы скачали. Дальше выбираем этот образ и нажимаем Choose.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/9.image.png)

# Установка CentOS (Almas)

В новом окне появится меню, где по умолчанию выделено «Test this media». Эта опция начнёт проверять установщик на целостность, что занимает время. Выберите опцию «Install CentOS Linux 8» (стрелка вверх) и нажмите Enter. Затем загрузится графический установщик, в котором можно работать мышкой.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/10.test.png)

Если вы попытаетесь нажать на экран, VirtualBox предупредит вас, что виртуальная машина перехватит вашу мышку, из-за чего вы не сможете использовать её на хосте. Это не проблема, потому что когда вам понадобится, вы можете нажать правый Ctrl и освободить мышку, поэтому нажимаем Capture.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/11.capture.png)

Когда дело касается языка установщика или операционной системы, рекомендую использовать Английский (US). Очень важно знать IT терминологию на английском языке, а также это позволит вам избежать дальнейших недопониманий. Теперь давайте пройдёмся по настройкам.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/12.lang.png)

В меню Keyboard добавляем нужную раскладку и выбираем горячие клавиши для переключения раскладки.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/13.menu.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/13.keyboard.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/13.options.png)

В меню Network & Host Name включаем сетевой адаптер, чтобы появилась сеть и указываем имя компьютеру.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/14.menu.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/14.network.png)

Во вкладке Time & Date убеждаемся, что включён Network Time и указываем правильную временную зону.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/15.menu.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/15.time.png)

Во вкладке Software Selection выбираем Workstation и ставим галочки перед теми пакетами программ, которые мы хотели бы установить.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/16.menu.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/16.soft.png)

Заходим во вкладку Installation Destination и просто нажимаем Done, установщик сам разметит диск. Я не буду рассматривать вопрос разметки диска сейчас, так как это требует понимания многих тем, которые мы еще не прошли.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/17.menu.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/17.disk.png)

Нажимаем Begin Installation.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/18.begin.png)

Пока идёт установка, мы должны задать пароль пользователю root и создать пользователя.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/19.root.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/19.rootp.png)

root – это пользователь, у которого есть все права на систему, он может делать с операционной системой практически всё.

Дальше создаём пользователя и ставим галочку «Сделать этого пользователя администратором». И хотя у нас есть пользователь root с полными правами на систему, безопаснее использовать пользователя с административными правами.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/19.user.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/19.userp.png)

Затем дожидаемся конца установки системы.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/20.finish.png)

После установки следует отмонтировать ISO образ и перезагрузить виртуалку (Devices – Optical Drive – убираем галочку с установочного образа, затем Machine – Reset для перезагрузки).

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/20.eject.png)

При включении принимаем лицензионное соглашение.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/21.license.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/21.license2.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/21.license3.png)

Затем логинимся пользователем user, после чего рабочее окружение, называемое Gnome, спросит у нас пару настроек и покажет окно с возможностями. Советую ознакомиться с ними.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/22.user.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/22.password.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/22.gnome.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/22.gnome2.png)

# Настройка системы

## увеличить видеопамять до 256 МБ
1. Добавить путь к VBoxManage в системный PATH
1.1. Откройте PowerShell от имени администратора.
1.2. Выполните команду для добавления пути в PATH:
```bash
[System.Environment]::SetEnvironmentVariable("PATH", $env:PATH + ";C:\Program Files\Oracle\VirtualBox", [System.EnvironmentVariableTarget]::Machine)
```
2. Перезагрузить PowerShell, чтобы изменения вступили в силу
3. Проверить успешность добавления
```bash
VBoxManage --version
```
4. Полностью выключите ВМ.
Если ВМ была в "Saved State", сначала удалите сохранённое состояние (Discard Saved State).

5. Установить вручную максимально возможное значение для VirtualBox - 512
```bash
VBoxManage modifyvm "cen" --vram 512
```
6. Проверьте, применились ли изменения:
```bash
VBoxManage showvminfo "cen" | find "VRAM"
```
# Настройка интернет подключения
## Настройка прокси для DNF
1. Откройте файл конфигурации DNF:

```bash
sudo nano /etc/dnf/dnf.conf
```

2. Добавьте параметры прокси в этот файл:

```bash
proxy=http://<proxy_ip>:<proxy_port>
proxy_username=<proxy_user>
proxy_password=<proxy_password>
```

3. Сохраните изменения и закройте файл.

**Для сохранения изменений комбинация Ctr+O**

## Настройка системных переменных прокси

1. Откройте файл /etc/environment:

```bash
sudo nano /etc/environment
```

2. Добавьте строки с настройками прокси:

```bash
http_proxy="http://<proxy_user>:<proxy_password>@<proxy_ip>:<proxy_port>"
https_proxy="http://<proxy_user>:<proxy_password>@<proxy_ip>:<proxy_port>"
ftp_proxy="http://<proxy_user>:<proxy_password>@<proxy_ip>:<proxy_port>"
no_proxy="localhost,127.0.0.1,.example.com"
```

3. Сохраните файл и выйдите.

**Для сохранения изменений комбинация Ctr+O**

4. Перезагрузите систему или выполните команду, чтобы обновить переменные окружения:

```bash
source /etc/environment
```

# Установка гостевых утилит

Дальше стоит установить обновления – для этого нажимаем Activities – Terminal и в терминале вводим команду 
```bash
sudo dnf update -y
```
* **sudo**: **Super User Do** — команда, которая позволяет запускать другие команды с правами суперпользователя (root) или другого пользователя. Это необходимо для выполнения операций, которые требуют административных прав (например, установка или удаление программ).

* **dnf**: **Dandified New Featured** — это новый пакетный менеджер в дистрибутивах Linux, таких как Fedora, RHEL и CentOS, который заменил старый пакетный менеджер yum. Он используется для установки, обновления и удаления пакетов, а также для управления зависимостями.

* **update**: Это не аббревиатура, а просто команда для обновления пакетов в системе до последних версий.

* **-y**: y — это параметр, который автоматически отвечает "да" на все запросы подтверждения, которые могут появиться в процессе выполнения команды.

**dnf** не работает на **Ubuntu**, потому что Ubuntu использует другой пакетный менеджер — **apt** (Advanced Package Tool), а не dnf.

🔹 **Команда для Ubuntu:**

```bash
sudo apt update -y
```

Чтобы установить все необходимые пакеты для компиляции программ с исходного кода (аналогично команде в CentOS), используйте следующую команду в Ubuntu:

```bash
sudo apt update
sudo apt install linux-headers-$(uname -r) libelf-dev gcc make perl -y
```

* **apt** расшифровывается как **Advanced Package Tool** (с англ. — "Расширенный инструмент для управления пакетами"). Это пакетный менеджер, используемый в дистрибутивах Linux, основанных на Debian, таких как Ubuntu, Debian, Linux Mint и других. Он предназначен для управления пакетами, установки, обновления, удаления программного обеспечения и работы с зависимостями.

После чего терминал спросит пароль пользователя. Введённый пароль не будет отображаться даже звёздочками, поэтому просто введите пароль и нажмите Enter. Эта команда обновит нашу систему.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/23.terminal.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/23.updates.png)

Иногда, при сбоях с сетью, команда может выдать ошибку, поэтому стоит прочитать последние строчки. Если вы видите там error или что-то в этом духе, то попробуйте заново запустить предыдущую команду. Если Complete – значит всё нормально.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/23.updatescomplete.png)

После обновления нужно установить пару программ

```bash
sudo dnf install kernel-devel kernel-headers elfutils-libelf-devel gcc make perl -y
```

* **sudo** — **Super User Do**

* **dnf** — **Dandified New Featured**

* **install** — Команда, которая указывает системе, что нужно установить указанные пакеты.

* **kernel-devel** — Это пакет, содержащий исходные файлы и заголовочные файлы для компиляции модулей ядра Linux. Он нужен, если вы хотите собирать или компилировать модули ядра.

* **kernel-headers** — Это пакет, содержащий заголовочные файлы ядра, которые необходимы для разработки программного обеспечения, которое взаимодействует с ядром Linux. Он используется для компиляции программ, которые используют специфические функции ядра.

* **elfutils-libelf-devel** — Это пакет, содержащий библиотеки и инструменты для работы с форматом **ELF** (**Executable and Linkable Format**), который используется в Linux для хранения исполнимых файлов и объектов. Этот пакет нужен для разработки программ, работающих с ELF-форматом.

* **gcc** — **GNU Compiler Collection** — это набор компиляторов для различных языков программирования, включая **C, C++, Fortran** и другие. Он широко используется для компиляции программ в Linux.

* **make** — Это утилита автоматизации сборки, используемая для компиляции программ из исходного кода. Она читает инструкции из файла **Makefile**, чтобы собрать проект по заданным правилам.

* **perl** — Язык программирования **Perl**, который часто используется для написания скриптов и утилит. Этот пакет нужен для работы программ, написанных на **Perl**.

* **-y** — Этот флаг указывает системе автоматически отвечать "да" на все запросы на подтверждение во время установки. То есть, установка будет происходить без запроса подтверждения от пользователя.

Это нужно для дальнейшей установки гостевых утилит - драйверов и утилит, необходимых виртуальной операционной системе для работы с гипервизором. Без них виртуалка тоже работает, но некоторые функции будут работать неполноценно - не будет определяться разрешение экрана, не будет общего буфера обмена и т.п. На продвинутых гипервизорах такие дополнения могут показывать на хосте детальную информацию об операционной системе виртуалки и даже управлять ей.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/24.install.png)

После того как успешно выполнилась предыдущая команда, перезагружаем виртуальную машину, затем снова логинимся нашим пользователем.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/25.reboot1.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/25.reboot2.png)


Дальше, в окне VirtualBox-а в меню Devices выбираем Insert Guest Additions CD Image, скачиваем необходимый образ диска.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/26.guest.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/26.download.png)

После этого диск подключится к виртуалке, где мы сможем нажать Run и программа установит гостевые утилиты.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/26.insert.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/26.run.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/26.pass.png)

Когда в новом терминале появится надпись «Press Return to close this window», нужно ещё раз перезагрузить компьютер. На этот раз операционная система правильно определит размер экрана и подстроится под размер окна VirtualBox.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/27.reboot.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/28.gui.png)

# Снапшоты

Советую вам потыкать настройки и программы, чтобы ближе познакомиться с графическим интерфейсом. А чтобы не пришлось переустанавливать систему после того, как вы случайно что-то сломаете, давайте сделаем снимок. Это функция гипервизора позволяет сохранить текущее состояние виртуальной машины, что позволит в дальнейшем откатиться в к этому состоянию.

Для этого нажимаем на значок рядом с виртуальной машиной (Tools), выбираем Snapshots, нажимаем Take и указываем название и описание.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/29.snapshot.png)
![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/29.take.png)

Снапшотов может быть несколько, чтобы откатиться к какому-то состоянию – выключаем виртуалку, выбираем снапшот и нажимаем restore.

![Тут была картинка](https://basis.gnulinux.pro/ru/latest/_images/30.restore.png)

После нажимаем Start.
Теперь VM автоматически подстраивается под изменение размера окна, не надо нажимать правый Ctr чтобы переключиться на ресурсы хоста.