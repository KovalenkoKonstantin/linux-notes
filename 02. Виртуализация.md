# Для чего нужна?

Основа современной IT инфраструктуры состоит из 3 элементов – безопасность, отказоустойчивость и производительность.

* Безопасность требует, чтобы на одной операционной системе выполнялась одна задача – допустим веб-сервер или почтовый сервер. Это позволит легче контролировать уязвимые места и смягчить потери в случае какой-либо угрозы. 
  `Запомните, хорошая безопасность строится не только на превентивных мерах, но и на мерах смягчения. Когда безопасность дала сбой и вам нужно уберечь как можно больше, лучше потерять одну систему, чем несколько.`

* Отказоустойчивость требует наличия нескольких копий одного сервиса на различных компьютерах, что позволит сервису работать без перебоев при проблемах с одним компьютером, электричеством в здании или даже стихийным бедствием в городе.

* Производительность требует оптимального использования ресурсов и возможность быстрого масштабирования, чтобы сервис не использовал лишние ресурсы во время простоя и не падал во время пиковых нагрузок.

Всё это звучит страшно как для администратора, так и для кармана начальника. Но есть технологии, которые позволяют упростить и удешевить всё это в разы. Одна из таких технологий – виртуализация, которой пользуются практически все. Она позволяет запускать несколько виртуальных компьютеров с полноценными операционными системами внутри одного реального компьютера.

![picture](https://basis.gnulinux.pro/ru/latest/_images/virtualization.png)

# Гипервизор

Для виртуализации используются специальные программы, называемые гипервизорами. Для её работы требуется операционная система и процессор, поддерживающий виртуализацию. Большинство современных процессоров поддерживает эту технологию. Операционная система, на которой запускается гипервизор, называется хост-системой или хостом, а «виртуальные компьютеры», запущенные на гипервизоре – виртуальными машинами, виртуалками или гостевыми машинами.

Есть множество реализаций гипервизоров, которые отличаются функционалом и ценой. Нам, для обучения линуксам, вполне подойдут и бесплатные варианты – к примеру, VirtualBox. Но, прежде чем установить гипервизор, стоит убедиться, поддерживается ли на вашем компьютере виртуализация и включена ли она.

# Поддерживает ли ваш компьютер?

Если на вашем компьютере Windows, запустите диспетчер задач, во вкладке производительность выберите CPU и ищите строчку Виртуализация. При значение «Enabled» всё нормально, ваш компьютер поддерживает виртуализацию и она включена. Если «Disabled» – то нужно зайти в BIOS и включить виртуализацию. 

![picture](https://basis.gnulinux.pro/ru/latest/_images/virtualizationwin.jpg)

Если у вас на компьютере GNU/Linux, то я все же рекомендую использовать виртуальные машины для обучения. Чтобы убедиться, поддерживается ли виртуализация вашим компьютером на GNU/Linux, выполните команду:
```bash
lscpu | grep Virtualization
Virtualization:                  VT-x
```
* 1. **lscpu** — это утилита в Linux, которая выводит информацию о центральном процессоре (CPU) системы, включая архитектуру, количество ядер, модель и другие характеристики.

* 2. **|** (пайп) — это оператор, который передает вывод одной команды как ввод для другой. В данном случае вывод команды **lscpu** передается в команду **grep**.

* 3. **grep Virtualization** — команда **grep** используется для поиска строк в выводе, которые содержат слово или фразу, указанную после неё. В данном случае `grep Virtualization` ищет строку, содержащую слово "Virtualization".

Таким образом, команда `lscpu | grep Virtualization` выводит строку или строки из информации о процессоре, которые содержат информацию о поддержке виртуализации, например:

* `Virtualization: VT-x` — указывает на поддержку технологии виртуализации Intel (Intel VT-x).

* `Virtualization: AMD-V` — указывает на поддержку технологии виртуализации AMD (AMD-V).

# Установка VirtualBox

После этого идём на сайт virtualBox –> [Downloads](https://www.virtualbox.org/wiki/Downloads) – выбираем «Windows hosts» и ждём, пока всё скачается, а затем устанавливаем гипервизор, следуя настройкам по умолчанию. После установки гипервизора, скачиваем с сайта «VirtualBox Extensions Pack» и устанавливаем.
После всех манипуляций перезагружаем компьютер. 

Если у вас GNU/Linux, VirtualBox можно скачать и установить как из репозитория, так и с сайта. Дополнительный шаг на Linux – добавить вашего пользователя в группу vboxusers
```bash
sudo usermod -aG vboxusers username
```
**sudo** — позволяет выполнить команду с правами суперпользователя (root). Для выполнения этой команды пользователь должен иметь соответствующие привилегии.

**usermod** — это утилита для модификации учетных записей пользователей в системе.

* -aG — параметры, которые означают:

* -a (append) — добавляет пользователя в указанные группы, не удаляя его из других групп.

* -G (groups) — указывает, в какую группу или группы нужно добавить пользователя. После этой опции указываются названия групп.

**vboxusers** — название группы, в которую добавляется пользователь. Обычно эта группа используется для пользователей, которым предоставлен доступ к VirtualBox (программное обеспечение для виртуализации).

*username* — имя пользователя, которого нужно добавить в группу vboxusers.

Также надо установить **VirtualBox Extension Pack**

Проверить установлен ли VirtualBox:
```bash
which virtualbox
```
Проверка прав пользователя с помощью команды id
Команда id показывает UID (идентификатор пользователя), GID (идентификатор группы) и список групп, к которым принадлежит пользователь:

```bash
id username
```

Проверка групп пользователя
Чтобы узнать, в каких группах состоит пользователь, используйте команду:

```bash
groups username
```

Проверка прав пользователя в sudo
Если вас интересует, есть ли у пользователя права для выполнения команд с привилегиями суперпользователя (через sudo), выполните команду:

```bash
sudo -l -U username
```
Эта команда отобразит список команд, которые пользователь может выполнять через sudo.


Традиционная эра развертывания: Ранее организации запускали приложения на физических серверах. Не было никакого способа определить границы ресурсов для приложений на физическом сервере, и это вызвало проблемы с распределением ресурсов. Например, если несколько приложений выполняются на физическом сервере, могут быть случаи, когда одно приложение будет занимать большую часть ресурсов, и в результате чего другие приложения будут работать хуже. Решением этого было запустить каждое приложение на другом физическом сервере. Но это не масштабировалось, поскольку ресурсы использовались не полностью, из-за чего организациям было накладно поддерживать множество физических серверов. Эра виртуального развертывания: В качестве решения была представлена виртуализация. Она позволила запускать несколько виртуальных машин (ВМ) на одном физическом сервере. Виртуализация изолирует приложения между виртуальными машинами и обеспечивает определенный уровень безопасности, поскольку информация одного приложения не может быть свободно доступна другому приложению. Виртуализация позволяет лучше использовать ресурсы на физическом сервере и обеспечивает лучшую масштабируемость, поскольку приложение можно легко добавить или обновить, кроме этого снижаются затраты на оборудование и многое другое. С помощью виртуализации можно превратить набор физических ресурсов в кластер одноразовых виртуальных машин. Каждая виртуальная машина представляет собой полноценную машину, на которой выполняются все компоненты, включая собственную операционную систему, поверх виртуализированного оборудования.

### Для чего нужна виртуализация?
Виртуализация позволяет создавать виртуальные экземпляры операционных систем (виртуальные машины) на одном физическом сервере или компьютере. Это позволяет эффективно использовать ресурсы системы, изолировать различные приложения и улучшить управление, масштабируемость и безопасность. Виртуализация также помогает в тестировании и разработке программного обеспечения, а также в развертывании многосерверных инфраструктур.

### Для чего нужен гипервизор?
Гипервизор (или виртуализатор) — это программное обеспечение, которое управляет виртуальными машинами. Он создает и управляет виртуальными машинами, распределяет физические ресурсы (процессор, память, устройства) между виртуальными машинами и обеспечивает их изоляцию друг от друга. Гипервизоры бывают двух типов:
- **Тип 1** (bare-metal): работает напрямую на железе (например, VMware ESXi, Microsoft Hyper-V).
- **Тип 2** (hosted): работает как приложение в операционной системе (например, VirtualBox, VMware Workstation).

### Что называется «хост-системой» (хост, host)?
Хост-система (или просто хост) — это физическая машина, на которой работает гипервизор и на которой создаются виртуальные машины. Это реальная операционная система или сервер, который предоставляет вычислительные ресурсы для виртуальных машин.

### Что называется «виртуальной машиной» (виртуалка, virtual machine, vm)?
Виртуальная машина (ВМ) — это программно-эмулированная среда, которая работает как отдельный компьютер внутри физического устройства (хоста). ВМ имеет свои собственные ресурсы, такие как процессор, память, дисковое пространство, и может работать с операционной системой, приложениями и сервисами, как обычный компьютер.

### Что называется «гостевой ОС» (guest os, guest)?
Гостевая операционная система (гостевая ОС или guest OS) — это операционная система, которая работает внутри виртуальной машины. Гостевая ОС использует виртуализированные ресурсы, предоставляемые гипервизором, и не имеет прямого доступа к физическим ресурсам хоста.

### Что такое и для чего нужны снэпшоты?
Снэпшот — это сохраненная точка состояния виртуальной машины в определённый момент времени. С помощью снэпшотов можно:
- Вернуться к предыдущему состоянию системы в случае сбоя или ошибки.
- Создавать резервные копии состояния виртуальной машины.
- Экспериментировать с изменениями в системе и легко откатываться к исходной конфигурации.

Снэпшоты помогают повысить гибкость управления виртуальными машинами, особенно в тестовых и производственных средах.
